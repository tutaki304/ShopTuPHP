# ShopTu - H·ªá th·ªëng Th∆∞∆°ng m·∫°i ƒêi·ªán t·ª≠

M·ªôt website b√°n h√†ng tr·ª±c tuy·∫øn ƒë∆∞·ª£c x√¢y d·ª±ng b·∫±ng PHP v·ªõi ki·∫øn tr√∫c MVC, h·ªó tr·ª£ ƒë·∫ßy ƒë·ªß c√°c t√≠nh nƒÉng c·ªßa m·ªôt c·ª≠a h√†ng tr·ª±c tuy·∫øn hi·ªán ƒë·∫°i.

## üìã M·ª•c l·ª•c
- [T·ªïng quan d·ª± √°n](#t·ªïng-quan-d·ª±-√°n)
- [T√≠nh nƒÉng ch√≠nh](#t√≠nh-nƒÉng-ch√≠nh)
- [Y√™u c·∫ßu h·ªá th·ªëng](#y√™u-c·∫ßu-h·ªá-th·ªëng)
- [C√†i ƒë·∫∑t v√† c·∫•u h√¨nh](#c√†i-ƒë·∫∑t-v√†-c·∫•u-h√¨nh)
- [C·∫•u tr√∫c d·ª± √°n](#c·∫•u-tr√∫c-d·ª±-√°n)
- [C∆° s·ªü d·ªØ li·ªáu](#c∆°-s·ªü-d·ªØ-li·ªáu)
- [H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng](#h∆∞·ªõng-d·∫´n-s·ª≠-d·ª•ng)
- [API v√† ch·ª©c nƒÉng](#api-v√†-ch·ª©c-nƒÉng)
- [B·∫£o m·∫≠t](#b·∫£o-m·∫≠t)
- [Kh·∫Øc ph·ª•c s·ª± c·ªë](#kh·∫Øc-ph·ª•c-s·ª±-c·ªë)

## üéØ T·ªïng quan d·ª± √°n

ShopTu l√† m·ªôt h·ªá th·ªëng th∆∞∆°ng m·∫°i ƒëi·ªán t·ª≠ ho√†n ch·ªânh ƒë∆∞·ª£c ph√°t tri·ªÉn b·∫±ng PHP v√† MySQL, s·ª≠ d·ª•ng ki·∫øn tr√∫c MVC (Model-View-Controller) ƒë·ªÉ ƒë·∫£m b·∫£o code d·ªÖ b·∫£o tr√¨ v√† m·ªü r·ªông.

### ƒê·∫∑c ƒëi·ªÉm n·ªïi b·∫≠t:
- üèóÔ∏è **Ki·∫øn tr√∫c MVC**: T√°ch bi·ªát r√µ r√†ng logic x·ª≠ l√Ω, d·ªØ li·ªáu v√† giao di·ªán
- üõ°Ô∏è **B·∫£o m·∫≠t cao**: PDO prepared statements, validation d·ªØ li·ªáu ƒë·∫ßu v√†o
- üì± **Responsive Design**: Giao di·ªán th√¢n thi·ªán tr√™n m·ªçi thi·∫øt b·ªã
- ‚ö° **Hi·ªáu su·∫•t t·ªëi ∆∞u**: CSS/JS ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a cho t·ªëc ƒë·ªô t·∫£i nhanh
- üé® **UI/UX hi·ªán ƒë·∫°i**: S·ª≠ d·ª•ng Bootstrap 5.3 v√† Font Awesome 6

## ‚ú® T√≠nh nƒÉng ch√≠nh

### Ph√≠a ng∆∞·ªùi d√πng:
- **Xem s·∫£n ph·∫©m**: Duy·ªát s·∫£n ph·∫©m theo danh m·ª•c, t√¨m ki·∫øm, l·ªçc
- **Gi·ªè h√†ng**: Th√™m/x√≥a s·∫£n ph·∫©m, c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
- **ƒê·∫∑t h√†ng**: Quy tr√¨nh thanh to√°n ƒë∆°n gi·∫£n, theo d√µi ƒë∆°n h√†ng
- **T√†i kho·∫£n**: ƒêƒÉng k√Ω, ƒëƒÉng nh·∫≠p, qu·∫£n l√Ω th√¥ng tin c√° nh√¢n
- **B√¨nh lu·∫≠n**: ƒê√°nh gi√° v√† b√¨nh lu·∫≠n s·∫£n ph·∫©m
- **Trang th√¥ng tin**: Gi·ªõi thi·ªáu, li√™n h·ªá

### Ph√≠a qu·∫£n tr·ªã:
- **Dashboard**: Th·ªëng k√™ t·ªïng quan, bi·ªÉu ƒë·ªì doanh thu, ƒë∆°n h√†ng g·∫ßn ƒë√¢y
- **Qu·∫£n l√Ω s·∫£n ph·∫©m**: CRUD s·∫£n ph·∫©m, upload h√¨nh ·∫£nh, qu·∫£n l√Ω kho
- **Qu·∫£n l√Ω ƒë∆°n h√†ng**: Xem, c·∫≠p nh·∫≠t tr·∫°ng th√°i ƒë∆°n h√†ng, th·ªëng k√™ doanh thu, top kh√°ch h√†ng
- **Qu·∫£n l√Ω ng∆∞·ªùi d√πng**: Qu·∫£n l√Ω t√†i kho·∫£n kh√°ch h√†ng v√† admin
- **Qu·∫£n l√Ω danh m·ª•c**: T·ªï ch·ª©c s·∫£n ph·∫©m theo danh m·ª•c
- **Qu·∫£n l√Ω b√¨nh lu·∫≠n**: Duy·ªát v√† x√≥a b√¨nh lu·∫≠n

## üñ•Ô∏è Y√™u c·∫ßu h·ªá th·ªëng

### M√°y ch·ªß:
- **PHP**: Phi√™n b·∫£n 7.4 tr·ªü l√™n (khuy·∫øn ngh·ªã PHP 8.0+)
- **MySQL**: Phi√™n b·∫£n 5.7 tr·ªü l√™n (ho·∫∑c MariaDB 10.2+)
- **Web Server**: Apache 2.4+ ho·∫∑c Nginx 1.18+
- **Extensions PHP c·∫ßn thi·∫øt**:
  - PDO v√† PDO_MySQL
  - GD library (x·ª≠ l√Ω h√¨nh ·∫£nh)
  - mbstring
  - session

### M√°y kh√°ch:
- **Tr√¨nh duy·ªát**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **JavaScript**: ƒê∆∞·ª£c b·∫≠t ƒë·ªÉ s·ª≠ d·ª•ng c√°c t√≠nh nƒÉng t∆∞∆°ng t√°c

## üîß C√†i ƒë·∫∑t v√† c·∫•u h√¨nh

### B∆∞·ªõc 1: T·∫£i xu·ªëng d·ª± √°n
```bash
# Clone repository (n·∫øu s·ª≠ d·ª•ng Git)
git clone [repository-url] ShopTuPHP

# Ho·∫∑c gi·∫£i n√©n file zip v√†o th∆∞ m·ª•c web server
# V√≠ d·ª•: C:\xampp\htdocs\ShopTuPHP (Windows)
# Ho·∫∑c: /var/www/html/ShopTuPHP (Linux)
```

### B∆∞·ªõc 2: C√†i ƒë·∫∑t m√¥i tr∆∞·ªùng ph√°t tri·ªÉn

#### S·ª≠ d·ª•ng XAMPP (Khuy·∫øn ngh·ªã cho Windows):
1. T·∫£i v√† c√†i ƒë·∫∑t XAMPP t·ª´ https://www.apachefriends.org/
2. Kh·ªüi ƒë·ªông Apache v√† MySQL t·ª´ XAMPP Control Panel
3. Copy d·ª± √°n v√†o th∆∞ m·ª•c `C:\xampp\htdocs\ShopTuPHP`

#### S·ª≠ d·ª•ng WAMP:
1. T·∫£i v√† c√†i ƒë·∫∑t WAMP t·ª´ http://www.wampserver.com/
2. Kh·ªüi ƒë·ªông WAMP server
3. Copy d·ª± √°n v√†o th∆∞ m·ª•c `C:\wamp64\www\ShopTuPHP`

#### S·ª≠ d·ª•ng LAMP (Linux):
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install apache2 mysql-server php libapache2-mod-php php-mysql php-gd

# CentOS/RHEL
sudo yum install httpd mariadb-server php php-mysqlnd php-gd

# Kh·ªüi ƒë·ªông d·ªãch v·ª•
sudo systemctl start apache2 mysql  # Ubuntu/Debian
sudo systemctl start httpd mariadb  # CentOS/RHEL
```

### B∆∞·ªõc 3: C·∫•u h√¨nh c∆° s·ªü d·ªØ li·ªáu

#### 3.1 T·∫°o c∆° s·ªü d·ªØ li·ªáu:
```sql
-- Truy c·∫≠p phpMyAdmin (http://localhost/phpmyadmin)
-- Ho·∫∑c s·ª≠ d·ª•ng command line:

mysql -u root -p
CREATE DATABASE shoptu CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

#### 3.2 T·∫°o b·∫£ng v√† d·ªØ li·ªáu m·∫´u:
```sql
USE shoptu;

-- B·∫£ng danh m·ª•c s·∫£n ph·∫©m
CREATE TABLE `danhmuc` (
  `madm` int(11) NOT NULL AUTO_INCREMENT,
  `tendm` varchar(255) NOT NULL,
  `soluongsp` int(11) DEFAULT 0,
  `thutu` int(11) DEFAULT 0,
  `trangthai` tinyint(1) DEFAULT 1,
  PRIMARY KEY (`madm`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- B·∫£ng s·∫£n ph·∫©m
CREATE TABLE `sanpham` (
  `masp` int(11) NOT NULL AUTO_INCREMENT,
  `tensp` varchar(255) NOT NULL,
  `dongia` decimal(15,3) DEFAULT 0.000,
  `khuyenmai` decimal(15,3) DEFAULT 0.000,
  `soluong` int(11) DEFAULT 0,
  `soluotxem` int(11) DEFAULT 0,
  `mota` text,
  `anh` varchar(255) DEFAULT NULL,
  `madm` int(11) DEFAULT NULL,
  `trangthai` tinyint(1) DEFAULT 1,
  `ngaytao` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`masp`),
  KEY `fk_sanpham_danhmuc` (`madm`),
  CONSTRAINT `fk_sanpham_danhmuc` FOREIGN KEY (`madm`) REFERENCES `danhmuc` (`madm`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- B·∫£ng t√†i kho·∫£n
CREATE TABLE `taikhoan` (
  `makh` int(11) NOT NULL AUTO_INCREMENT,
  `hoten` varchar(100) NOT NULL,
  `email` varchar(100) NOT NULL,
  `matkhau` varchar(255) NOT NULL,
  `diachi` text,
  `sdt` varchar(20) DEFAULT NULL,
  `anh` varchar(255) DEFAULT 'upload/avatar/default.jpg',
  `quyen` enum('admin','user') DEFAULT 'user',
  `ngaytao` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`makh`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- B·∫£ng h√≥a ƒë∆°n
CREATE TABLE `hoadon` (
  `mahd` int(11) NOT NULL AUTO_INCREMENT,
  `makh` int(11) NOT NULL,
  `tongtien` decimal(15,3) DEFAULT 0.000,
  `trangthai` enum('gio-hang','cho-xac-nhan','dang-giao','hoan-thanh','huy') DEFAULT 'gio-hang',
  `ngaydathang` timestamp DEFAULT CURRENT_TIMESTAMP,
  `diachi_giaohang` text,
  `ghichu` text,
  PRIMARY KEY (`mahd`),
  KEY `fk_hoadon_taikhoan` (`makh`),
  CONSTRAINT `fk_hoadon_taikhoan` FOREIGN KEY (`makh`) REFERENCES `taikhoan` (`makh`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- B·∫£ng chi ti·∫øt h√≥a ƒë∆°n
CREATE TABLE `chitiethoadon` (
  `mahd` int(11) NOT NULL,
  `masp` int(11) NOT NULL,
  `soluong` int(11) NOT NULL DEFAULT 1,
  `dongia` decimal(15,3) DEFAULT 0.000,
  PRIMARY KEY (`mahd`, `masp`),
  KEY `fk_cthd_sanpham` (`masp`),
  CONSTRAINT `fk_cthd_hoadon` FOREIGN KEY (`mahd`) REFERENCES `hoadon` (`mahd`) ON DELETE CASCADE,
  CONSTRAINT `fk_cthd_sanpham` FOREIGN KEY (`masp`) REFERENCES `sanpham` (`masp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- B·∫£ng b√¨nh lu·∫≠n
CREATE TABLE `binhluan` (
  `mabl` int(11) NOT NULL AUTO_INCREMENT,
  `makh` int(11) NOT NULL,
  `masp` int(11) NOT NULL,
  `noidung` text NOT NULL,
  `ngaygui` timestamp DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`mabl`),
  KEY `fk_bl_taikhoan` (`makh`),
  KEY `fk_bl_sanpham` (`masp`),
  CONSTRAINT `fk_bl_taikhoan` FOREIGN KEY (`makh`) REFERENCES `taikhoan` (`makh`),
  CONSTRAINT `fk_bl_sanpham` FOREIGN KEY (`masp`) REFERENCES `sanpham` (`masp`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

-- Th√™m t√†i kho·∫£n admin m·∫∑c ƒë·ªãnh
INSERT INTO `taikhoan` (`hoten`, `email`, `matkhau`, `quyen`) 
VALUES ('Admin', 'admin@shoptu.com', 'admin123', 'admin');

-- Th√™m danh m·ª•c m·∫´u
INSERT INTO `danhmuc` (`tendm`, `soluongsp`, `thutu`) VALUES
('Th·ªùi trang nam', 0, 1),
('Th·ªùi trang n·ªØ', 0, 2),
('Ph·ª• ki·ªán', 0, 3),
('Gi√†y d√©p', 0, 4);
```

### B∆∞·ªõc 4: C·∫•u h√¨nh k·∫øt n·ªëi database

M·ªü file `model/connect.php` v√† ki·ªÉm tra th√¥ng tin k·∫øt n·ªëi:

```php
<?php
// C·∫•u h√¨nh k·∫øt n·ªëi database
$servername = "localhost";      // ƒê·ªãa ch·ªâ server MySQL
$username = "root";             // T√™n ƒëƒÉng nh·∫≠p MySQL
$password = "";                 // M·∫≠t kh·∫©u MySQL (ƒë·ªÉ tr·ªëng v·ªõi XAMPP m·∫∑c ƒë·ªãnh)
$dbname = "shoptu";            // T√™n database

function pdo_get_connection() {
    global $servername, $username, $password, $dbname;
    try {
        $conn = new PDO("mysql:host=$servername;dbname=$dbname;charset=utf8mb4", 
                       $username, $password);
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        return $conn;
    } catch(PDOException $e) {
        die("K·∫øt n·ªëi th·∫•t b·∫°i: " . $e->getMessage());
    }
}
?>
```

**L∆∞u √Ω**: N·∫øu MySQL c√≥ m·∫≠t kh·∫©u, h√£y c·∫≠p nh·∫≠t bi·∫øn `$password`.

### B∆∞·ªõc 5: C·∫•u h√¨nh quy·ªÅn th∆∞ m·ª•c

```bash
# Linux/Mac - ƒê·∫∑t quy·ªÅn cho th∆∞ m·ª•c upload
chmod 755 upload/
chmod 755 upload/product/
chmod 755 upload/avatar/

# Windows - ƒê·∫£m b·∫£o IIS_IUSRS c√≥ quy·ªÅn ghi v√†o th∆∞ m·ª•c upload
```

### B∆∞·ªõc 6: Truy c·∫≠p website

- **Trang ch·ªß ng∆∞·ªùi d√πng**: http://localhost/ShopTuPHP/
- **Trang qu·∫£n tr·ªã**: http://localhost/ShopTuPHP/admin.php
- **T√†i kho·∫£n admin**: 
  - Email: admin@shoptu.com
  - M·∫≠t kh·∫©u: admin123

## üìÅ C·∫•u tr√∫c d·ª± √°n

```
ShopTuPHP/
‚îú‚îÄ‚îÄ index.php                 # Entry point cho giao di·ªán ng∆∞·ªùi d√πng
‚îú‚îÄ‚îÄ admin.php                 # Entry point cho giao di·ªán admin
‚îú‚îÄ‚îÄ global.php                # File c·∫•u h√¨nh global
‚îú‚îÄ‚îÄ README.md                 # File h∆∞·ªõng d·∫´n n√†y
‚îú‚îÄ‚îÄ fix_cart_database.sql     # Script fix database gi·ªè h√†ng
‚îÇ
‚îú‚îÄ‚îÄ controller/               # T·∫ßng Controller (x·ª≠ l√Ω logic)
‚îÇ   ‚îú‚îÄ‚îÄ page.php             # Controller cho c√°c trang tƒ©nh
‚îÇ   ‚îú‚îÄ‚îÄ product.php          # Controller cho s·∫£n ph·∫©m
‚îÇ   ‚îî‚îÄ‚îÄ user.php             # Controller cho ng∆∞·ªùi d√πng
‚îÇ
‚îú‚îÄ‚îÄ model/                    # T·∫ßng Model (x·ª≠ l√Ω d·ªØ li·ªáu)
‚îÇ   ‚îú‚îÄ‚îÄ connect.php          # K·∫øt n·ªëi database
‚îÇ   ‚îú‚îÄ‚îÄ products.php         # Model s·∫£n ph·∫©m
‚îÇ   ‚îú‚îÄ‚îÄ user.php             # Model ng∆∞·ªùi d√πng
‚îÇ   ‚îú‚îÄ‚îÄ cart.php             # Model gi·ªè h√†ng
‚îÇ   ‚îú‚îÄ‚îÄ categories.php       # Model danh m·ª•c
‚îÇ   ‚îú‚îÄ‚îÄ binhluan.php         # Model b√¨nh lu·∫≠n
‚îÇ   ‚îî‚îÄ‚îÄ dashboard.php        # Model dashboard admin
‚îÇ
‚îú‚îÄ‚îÄ view/                     # T·∫ßng View (giao di·ªán)
‚îÇ   ‚îú‚îÄ‚îÄ template_head.php    # Header chung cho user
‚îÇ   ‚îú‚îÄ‚îÄ template_header.php  # Navigation cho user
‚îÇ   ‚îú‚îÄ‚îÄ template_footer.php  # Footer chung cho user
‚îÇ   ‚îú‚îÄ‚îÄ template_admin_*.php # Template cho admin
‚îÇ   ‚îú‚îÄ‚îÄ page_*.php           # C√°c trang user
‚îÇ   ‚îî‚îÄ‚îÄ product_*.php        # C√°c trang admin
‚îÇ
‚îú‚îÄ‚îÄ assets_user/              # Assets cho giao di·ªán user
‚îÇ   ‚îú‚îÄ‚îÄ css/                 # File CSS
‚îÇ   ‚îú‚îÄ‚îÄ img/                 # H√¨nh ·∫£nh giao di·ªán
‚îÇ   ‚îî‚îÄ‚îÄ js/                  # File JavaScript
‚îÇ
‚îú‚îÄ‚îÄ assets_admin/             # Assets cho giao di·ªán admin
‚îÇ   ‚îú‚îÄ‚îÄ css/                 # CSS cho admin
‚îÇ   ‚îî‚îÄ‚îÄ img/                 # H√¨nh ·∫£nh admin
‚îÇ
‚îî‚îÄ‚îÄ upload/                   # Th∆∞ m·ª•c ch·ª©a file upload
    ‚îú‚îÄ‚îÄ product/             # H√¨nh ·∫£nh s·∫£n ph·∫©m
    ‚îî‚îÄ‚îÄ avatar/              # Avatar ng∆∞·ªùi d√πng
```

### Gi·∫£i th√≠ch ki·∫øn tr√∫c MVC:

1. **Model** (`model/`): Ch·ª©a logic x·ª≠ l√Ω d·ªØ li·ªáu, k·∫øt n·ªëi database
2. **View** (`view/`): Ch·ª©a giao di·ªán HTML/PHP hi·ªÉn th·ªã cho ng∆∞·ªùi d√πng
3. **Controller** (`controller/`): X·ª≠ l√Ω y√™u c·∫ßu t·ª´ user, ƒëi·ªÅu ph·ªëi gi·ªØa Model v√† View

## üóÑÔ∏è C∆° s·ªü d·ªØ li·ªáu

### S∆° ƒë·ªì quan h·ªá c√°c b·∫£ng:

```
taikhoan (1) -----> (n) hoadon (1) -----> (n) chitiethoadon (n) <----- (1) sanpham
    |                                                                        |
    |                                                                        |
    v                                                                        |
binhluan (n) <----------------------------------------------------------------
    |
    |
danhmuc (1) -----> (n) sanpham
```

### M√¥ t·∫£ c√°c b·∫£ng:

#### 1. `taikhoan` - Qu·∫£n l√Ω ng∆∞·ªùi d√πng
- `makh`: ID t√†i kho·∫£n (Primary Key)
- `hoten`: H·ªç v√† t√™n
- `email`: Email ƒëƒÉng nh·∫≠p (Unique)
- `matkhau`: M·∫≠t kh·∫©u
- `diachi`: ƒê·ªãa ch·ªâ
- `sdt`: S·ªë ƒëi·ªán tho·∫°i
- `anh`: ƒê∆∞·ªùng d·∫´n avatar
- `quyen`: Quy·ªÅn truy c·∫≠p ('admin'/'user')
- `ngaytao`: Ng√†y t·∫°o t√†i kho·∫£n

#### 2. `danhmuc` - Danh m·ª•c s·∫£n ph·∫©m
- `madm`: ID danh m·ª•c (Primary Key)
- `tendm`: T√™n danh m·ª•c
- `soluongsp`: S·ªë l∆∞·ª£ng s·∫£n ph·∫©m trong danh m·ª•c
- `thutu`: Th·ª© t·ª± hi·ªÉn th·ªã
- `trangthai`: Tr·∫°ng th√°i ho·∫°t ƒë·ªông

#### 3. `sanpham` - S·∫£n ph·∫©m
- `masp`: ID s·∫£n ph·∫©m (Primary Key)
- `tensp`: T√™n s·∫£n ph·∫©m
- `dongia`: Gi√° g·ªëc
- `khuyenmai`: Gi√° khuy·∫øn m√£i
- `soluong`: S·ªë l∆∞·ª£ng t·ªìn kho
- `soluotxem`: S·ªë l∆∞·ª£t xem
- `mota`: M√¥ t·∫£ s·∫£n ph·∫©m
- `anh`: H√¨nh ·∫£nh s·∫£n ph·∫©m
- `madm`: ID danh m·ª•c (Foreign Key)
- `trangthai`: Tr·∫°ng th√°i ho·∫°t ƒë·ªông
- `ngaytao`: Ng√†y t·∫°o

#### 4. `hoadon` - ƒê∆°n h√†ng
- `mahd`: ID h√≥a ƒë∆°n (Primary Key)
- `makh`: ID kh√°ch h√†ng (Foreign Key)
- `tongtien`: T·ªïng ti·ªÅn
- `trangthai`: Tr·∫°ng th√°i ƒë∆°n h√†ng
- `ngaydathang`: Ng√†y ƒë·∫∑t h√†ng
- `diachi_giaohang`: ƒê·ªãa ch·ªâ giao h√†ng
- `ghichu`: Ghi ch√∫

#### 5. `chitiethoadon` - Chi ti·∫øt ƒë∆°n h√†ng
- `mahd`: ID h√≥a ƒë∆°n (Foreign Key)
- `masp`: ID s·∫£n ph·∫©m (Foreign Key)
- `soluong`: S·ªë l∆∞·ª£ng
- `dongia`: ƒê∆°n gi√° t·∫°i th·ªùi ƒëi·ªÉm mua

#### 6. `binhluan` - B√¨nh lu·∫≠n s·∫£n ph·∫©m
- `mabl`: ID b√¨nh lu·∫≠n (Primary Key)
- `makh`: ID kh√°ch h√†ng (Foreign Key)
- `masp`: ID s·∫£n ph·∫©m (Foreign Key)
- `noidung`: N·ªôi dung b√¨nh lu·∫≠n
- `ngaygui`: Ng√†y g·ª≠i

## üìñ H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng

### Ph√≠a ng∆∞·ªùi d√πng:

#### 1. ƒêƒÉng k√Ω/ƒêƒÉng nh·∫≠p:
- Truy c·∫≠p: http://localhost/ShopTuPHP/index.php?mod=user&act=login
- Click "ƒêƒÉng k√Ω" ƒë·ªÉ t·∫°o t√†i kho·∫£n m·ªõi
- Nh·∫≠p th√¥ng tin v√† submit form

#### 2. Duy·ªát s·∫£n ph·∫©m:
- Xem t·∫•t c·∫£ s·∫£n ph·∫©m: Trang ch·ªß
- Xem theo danh m·ª•c: Click v√†o menu danh m·ª•c
- T√¨m ki·∫øm: S·ª≠ d·ª•ng √¥ t√¨m ki·∫øm
- Xem chi ti·∫øt: Click v√†o s·∫£n ph·∫©m

#### 3. Mua h√†ng:
- Th√™m v√†o gi·ªè: Click "Th√™m v√†o gi·ªè h√†ng"
- Xem gi·ªè h√†ng: Click icon gi·ªè h√†ng
- C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng: Thay ƒë·ªïi v√† click "C·∫≠p nh·∫≠t"
- Thanh to√°n: Click "Thanh to√°n" v√† ƒëi·ªÅn th√¥ng tin

#### 4. Qu·∫£n l√Ω t√†i kho·∫£n:
- Xem th√¥ng tin: Menu "T√†i kho·∫£n"
- C·∫≠p nh·∫≠t profile: Ch·ªânh s·ª≠a v√† l∆∞u
- Xem l·ªãch s·ª≠ ƒë∆°n h√†ng: Tab "ƒê∆°n h√†ng"

### Ph√≠a qu·∫£n tr·ªã:

#### 1. Truy c·∫≠p admin:
- URL: http://localhost/ShopTuPHP/admin.php
- ƒêƒÉng nh·∫≠p v·ªõi t√†i kho·∫£n admin

#### 2. Qu·∫£n l√Ω s·∫£n ph·∫©m:
- **Xem danh s√°ch**: Menu "S·∫£n ph·∫©m"
- **Th√™m m·ªõi**: Click "Th√™m s·∫£n ph·∫©m"
- **Ch·ªânh s·ª≠a**: Click "Edit" tr√™n t·ª´ng s·∫£n ph·∫©m
- **X√≥a**: Click "Delete" (c√≥ x√°c nh·∫≠n)

#### 3. Qu·∫£n l√Ω ƒë∆°n h√†ng:
- **Xem ƒë∆°n h√†ng**: Menu "ƒê∆°n h√†ng"
- **C·∫≠p nh·∫≠t tr·∫°ng th√°i**: Select tr·∫°ng th√°i m·ªõi
- **Xem chi ti·∫øt**: Click v√†o m√£ ƒë∆°n h√†ng

#### 4. Qu·∫£n l√Ω ng∆∞·ªùi d√πng:
- **Danh s√°ch**: Menu "Ng∆∞·ªùi d√πng"
- **Th√™m admin**: Click "Th√™m t√†i kho·∫£n"
- **Ch·ªânh s·ª≠a**: Click "Edit" (tr·ª´ t√†i kho·∫£n admin)
- **X√≥a**: Click "Delete" (tr·ª´ t√†i kho·∫£n admin)

#### 5. Dashboard:
- **Th·ªëng k√™ t·ªïng quan**: Doanh thu, ƒë∆°n h√†ng, s·∫£n ph·∫©m
- **Bi·ªÉu ƒë·ªì**: Theo d√µi xu h∆∞·ªõng b√°n h√†ng
- **S·∫£n ph·∫©m hot**: Top s·∫£n ph·∫©m b√°n ch·∫°y

## üîó API v√† ch·ª©c nƒÉng

### Routing System:

Website s·ª≠ d·ª•ng URL routing d·∫°ng: `?mod=module&act=action&id=value`

#### User Routes (index.php):
```
GET  /?mod=page&act=home                 # Trang ch·ªß
GET  /?mod=page&act=sanpham              # Danh s√°ch s·∫£n ph·∫©m
GET  /?mod=page&act=ctsanpham&id=123     # Chi ti·∫øt s·∫£n ph·∫©m
GET  /?mod=page&act=giohang              # Gi·ªè h√†ng
POST /?mod=user&act=login                # ƒêƒÉng nh·∫≠p
POST /?mod=user&act=signup               # ƒêƒÉng k√Ω
GET  /?mod=user&act=logout               # ƒêƒÉng xu·∫•t
POST /?mod=product&act=search            # T√¨m ki·∫øm s·∫£n ph·∫©m
```

#### Admin Routes (admin.php):
```
GET  /admin.php?mod=page&act=dashboard   # Dashboard admin
GET  /admin.php?mod=product&act=admin    # Qu·∫£n l√Ω s·∫£n ph·∫©m
POST /admin.php?mod=product&act=add      # Th√™m s·∫£n ph·∫©m
POST /admin.php?mod=product&act=edit     # S·ª≠a s·∫£n ph·∫©m
GET  /admin.php?mod=order&act=list       # Danh s√°ch ƒë∆°n h√†ng
GET  /admin.php?mod=order&act=detail&id=123  # Chi ti·∫øt ƒë∆°n h√†ng
POST /admin.php?mod=order&act=update_status  # C·∫≠p nh·∫≠t tr·∫°ng th√°i
GET  /admin.php?mod=order&act=statistics # Th·ªëng k√™ ƒë∆°n h√†ng
GET  /admin.php?mod=user&act=admin       # Qu·∫£n l√Ω ng∆∞·ªùi d√πng
```

### AJAX Functions:

#### Gi·ªè h√†ng:
```javascript
// Th√™m v√†o gi·ªè h√†ng
function addToCart(productId, quantity) {
    // AJAX call to controller/product.php
}

// C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
function updateCartQuantity(productId, newQuantity) {
    // AJAX call to update cart
}
```

#### Admin functions:
```javascript
// X√≥a s·∫£n ph·∫©m v·ªõi SweetAlert
function deleteProduct(id) {
    Swal.fire({
        title: 'B·∫°n c√≥ ch·∫Øc ch·∫Øn?',
        text: "Kh√¥ng th·ªÉ ho√†n t√°c sau khi x√≥a!",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'X√≥a',
        cancelButtonText: 'H·ªßy'
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = `admin.php?mod=product&act=delete&id=${id}`;
        }
    });
}
```

## üîê B·∫£o m·∫≠t

### 1. SQL Injection Protection:
```php
// S·ª≠ d·ª•ng PDO Prepared Statements
function getProduct($id) {
    $sql = "SELECT * FROM sanpham WHERE masp = ?";
    $conn = pdo_get_connection();
    $stmt = $conn->prepare($sql);
    $stmt->execute([$id]);
    return $stmt->fetch();
}
```

### 2. XSS Protection:
```php
// Escape output data
echo htmlspecialchars($user_input, ENT_QUOTES, 'UTF-8');
```

### 3. Authentication:
```php
// Session management
session_start();
if (!isset($_SESSION['user']) || $_SESSION['user']['quyen'] !== 'admin') {
    header('Location: index.php');
    exit;
}
```

### 4. File Upload Security:
```php
// Validate file type and size
$allowed_types = ['jpg', 'jpeg', 'png', 'gif'];
$max_size = 5 * 1024 * 1024; // 5MB

if (!in_array($file_extension, $allowed_types)) {
    die("File type not allowed");
}
```

### 5. Password Hashing (Khuy·∫øn ngh·ªã):
```php
// Trong t∆∞∆°ng lai n√™n s·ª≠ d·ª•ng password hashing
$hashed_password = password_hash($password, PASSWORD_DEFAULT);
$is_valid = password_verify($input_password, $hashed_password);
```

## üõ†Ô∏è Kh·∫Øc ph·ª•c s·ª± c·ªë

### 1. L·ªói k·∫øt n·ªëi database:
```
SQLSTATE[HY000] [1045] Access denied for user 'root'@'localhost'
```
**Gi·∫£i ph√°p**:
- Ki·ªÉm tra username/password trong `model/connect.php`
- ƒê·∫£m b·∫£o MySQL service ƒëang ch·∫°y
- Ki·ªÉm tra t√™n database c√≥ t·ªìn t·∫°i

### 2. L·ªói kh√¥ng hi·ªÉn th·ªã h√¨nh ·∫£nh:
**Gi·∫£i ph√°p**:
- Ki·ªÉm tra quy·ªÅn th∆∞ m·ª•c `upload/`
- ƒê·∫£m b·∫£o ƒë∆∞·ªùng d·∫´n h√¨nh ·∫£nh ƒë√∫ng
- Ki·ªÉm tra PHP GD extension ƒë∆∞·ª£c b·∫≠t

### 3. Session l·ªói:
```
Warning: session_start(): Cannot send session cookie
```
**Gi·∫£i ph√°p**:
- ƒê·∫£m b·∫£o `session_start()` ƒë∆∞·ª£c g·ªçi tr∆∞·ªõc khi c√≥ output
- Ki·ªÉm tra quy·ªÅn ghi v√†o th∆∞ m·ª•c session PHP

### 4. Upload file kh√¥ng th√†nh c√¥ng:
**Gi·∫£i ph√°p**:
```php
// Ki·ªÉm tra c·∫•u h√¨nh PHP
ini_set('upload_max_filesize', '10M');
ini_set('post_max_size', '10M');
ini_set('max_execution_time', 300);
```

### 5. CSS/JS kh√¥ng load:
**Gi·∫£i ph√°p**:
- Ki·ªÉm tra ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi
- Clear browser cache
- Ki·ªÉm tra file t·ªìn t·∫°i trong th∆∞ m·ª•c assets

### 6. L·ªói 404 tr√™n c√°c route:
**Gi·∫£i ph√°p**:
- ƒê·∫£m b·∫£o mod_rewrite ƒë∆∞·ª£c b·∫≠t (Apache)
- Ki·ªÉm tra file .htaccess
- S·ª≠ d·ª•ng URL ƒë·∫ßy ƒë·ªß v·ªõi query parameters

### 7. Performance optimization:
```php
// B·∫≠t compression
if (extension_loaded('zlib') && !ini_get('zlib.output_compression')) {
    ob_start('ob_gzhandler');
}

// Cache headers cho static files
if (preg_match('/\.(css|js|png|jpg|jpeg|gif|ico)$/', $_SERVER['REQUEST_URI'])) {
    header('Cache-Control: public, max-age=31536000');
    header('Expires: ' . gmdate('D, d M Y H:i:s', time() + 31536000) . ' GMT');
}
```

## üìû H·ªó tr·ª£

### C·∫•u h√¨nh ph√°t tri·ªÉn:
- **PHP Version**: 7.4+ (khuy·∫øn ngh·ªã 8.0+)
- **MySQL Version**: 5.7+ (khuy·∫øn ngh·ªã 8.0+)
- **Web Server**: Apache v·ªõi mod_rewrite
- **Extensions**: PDO, GD, mbstring, session

### Debugging:
```php
// B·∫≠t error reporting cho development
if ($_SERVER['SERVER_NAME'] === 'localhost') {
    error_reporting(E_ALL);
    ini_set('display_errors', 1);
    ini_set('log_errors', 1);
    ini_set('error_log', 'php_errors.log');
}
```

### Log Files:
- **Apache Error Log**: `/var/log/apache2/error.log` (Linux)
- **PHP Error Log**: Xem c·∫•u h√¨nh `error_log` trong php.ini
- **MySQL Error Log**: `/var/log/mysql/error.log` (Linux)

---

## üìù Ghi ch√∫ ph√°t tri·ªÉn

- Code ƒë∆∞·ª£c vi·∫øt theo chu·∫©n PSR-4 cho autoloading
- S·ª≠ d·ª•ng PDO thay v√¨ mysqli ƒë·ªÉ tƒÉng b·∫£o m·∫≠t
- CSS s·ª≠ d·ª•ng Flexbox v√† Grid cho responsive design
- JavaScript ES6+ v·ªõi async/await cho AJAX
- T·∫•t c·∫£ user input ƒë·ªÅu ƒë∆∞·ª£c validate v√† sanitize

**Version**: 1.0.0
**Last Updated**: 2024
**Developer**: ShopTu Team

---

*ƒê·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ th√™m, vui l√≤ng t·∫°o issue trong repository ho·∫∑c li√™n h·ªá qua email.*
